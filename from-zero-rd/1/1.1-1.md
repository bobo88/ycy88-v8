# 1.1.1 HTTP 协议

## 1. HTTP 简介

> 关键词：应用层、传输、协议、请求&响应、TCP/IP、无状态。

**HTTP 协议**（HyperText Transfer Protocol，超文本传输协议）是万维网（World Wide Web, WWW）中用于传输超文本的标准协议。它用于从 Web 服务器将数据（如 HTML 文件、图片文件、视频流、查询结果等）传输到客户端（如浏览器）。HTTP 是一种 **基于请求-响应模型** 的协议，通常用于浏览器与服务器之间的通信。

HTTP 工作在 **应用层**，通过 **TCP/IP 协议栈** 传输数据，其中 **TCP** 提供可靠的传输服务。HTTP 协议通过客户端和服务器之间的请求和响应交换数据，支持文本、图像、视频、音频等多种媒体类型。其无状态（Stateless）和无连接（Connectionless）特点意味着每次请求都是独立的，服务器不会保留客户端请求的历史信息。

HTTP 作为 Web 上的基础协议，通常与 **HTTPS**（即安全版本的 HTTP）结合使用，以提供加密通信保障数据传输的安全性。

### 关键特点：

1. **基于 TCP/IP 协议**：HTTP 依赖于底层的 TCP/IP 协议进行数据传输。
2. **无状态协议**：每次请求与响应之间没有持久连接或记忆，服务器不会保存客户端的历史状态。
3. **请求-响应模型**：客户端发起请求，服务器响应请求并返回数据。
4. **跨平台支持**：HTTP 是独立于操作系统、硬件平台的协议，广泛支持不同类型的设备与浏览器。

::: tip 小提示
**HTTP 协议** 可以理解为浏览器和服务器之间沟通的“语言”，它规定了浏览器如何向服务器请求资源，以及服务器如何响应这些请求。这就像你去餐馆点菜，服务员把你点的菜（数据）从厨房（服务器）拿到你桌上（浏览器）。如果“语言”不通，你当然拿不到你想要的菜了。
:::

## 2. HTTP 协议的主要特点

> 场景： WEB 通信。

1. **请求-响应模型**：客户端（浏览器）发出请求，服务器返回响应。每次请求和响应都是独立的。

2. **无状态协议**：每个请求都是独立的，服务器不会保存历史信息。

3. **无连接协议**：每次请求建立独立连接，处理完毕后关闭连接，除非使用持久连接（如 HTTP/1.1 中的持久连接 `keep-alive`）。

4. **基于 TCP/IP 协议**：依赖 TCP 保证数据可靠传输，IP 定位服务器。

5. **支持多媒体类型**：除了 HTML，还能传输文本、图片、音频、视频等多种数据。

6. **跨平台支持**：独立于操作系统和硬件，可以在不同平台之间通信。

7. **可扩展性**：支持扩展请求方法、状态码和自定义头部字段。如 HTTP/2 引入了多路复用、头部压缩等新特性，提升了性能。

8. **安全性（HTTPS）**：HTTP 本身不加密数据，HTTPS 使用 SSL/TLS 加密传输。

9. **多种请求方法**：包括 GET（获取资源）、POST（提交数据）、PUT（更新资源）、DELETE（删除资源）等。

10. **状态码**：响应中包含状态码，指示请求结果（如 200 OK，404 Not Found，500 Server Error）。

::: tip 小提示：`B/S` vs `C/S` 模式的对比
| 特性 | B/S 模式 | C/S 模式 |
|---------------|--------------------------------------|-----------------------------------|
| **客户端** | 浏览器（跨平台） | 专有客户端程序（需安装和更新） |
| **服务器** | 处理核心逻辑，数据存储 | 处理核心逻辑，数据存储 |
| **网络依赖** | 高依赖网络 | 可以支持离线工作（部分客户端） |
| **维护性** | 服务器端维护更新，客户端无需操作 | 客户端和服务器都需要维护和更新 |
| **应用类型** | Web 应用（浏览器访问） | 桌面应用（需要安装特定客户端） |
| **用户体验** | 受限于浏览器性能 | 可以利用客户端设备的计算能力 |
| **适用场景** | Web 应用、跨平台应用、轻量级应用 | 企业级应用、高性能图形、游戏等 |
| **举例** | <span style="color:#f60;">1）Web 应用，如 Gmail、Facebook 等。<br/> 2）所有可以通过浏览器访问的 Web 应用。</span> | <span style="color:#f60;">1）办公软件（如 Microsoft Office，Outlook 等）<br/> 2）游戏客户端（如 PC 游戏客户端）。<br/> 3）企业级软件（如财务软件、ERP 系统等）。</span> |
:::

## 3. HTTP URL

**URL**（Uniform Resource Locator，统一资源定位符）是互联网上标识资源位置的标准字符串。在 HTTP 协议中，URL 用于指定服务器上的特定资源或页面，以便客户端（通常是浏览器）能够通过 HTTP 请求来访问它。

### **URL 的基本结构**

一个标准的 URL 通常包括以下几个部分：

```
http://[用户名:密码@]主机名[:端口]/路径[?查询字符串][#片段标识符]
```

### **各部分解释**：

1. **协议（Scheme）**：
   - **格式**：`http://` 或 `https://`
   - 表示客户端和服务器之间通信使用的协议类型，`http` 表示非加密连接，`https` 表示加密连接（SSL/TLS）。
2. **用户名和密码（可选）**：

   - **格式**：`用户名:密码@`
   - 如果 URL 需要身份验证，客户端可以在 URL 中提供用户名和密码。例如：`http://user:password@www.example.com`。
   - 这种方式现在不常见，通常会通过浏览器的登录对话框或 HTTP 头部进行认证。

3. **主机名（Host）**：

   - **格式**：`www.example.com`
   - 主机名指定了 Web 服务器的域名或 IP 地址，客户端通过 DNS 查询这个主机名对应的 IP 地址。
   - 可以是域名（如 `www.example.com`）或者是 IP 地址（如 `192.168.1.1`）。

4. **端口（Port， 可选）**：

   - **格式**：`:端口号`
   - 表示 Web 服务器所使用的网络端口。默认情况下，HTTP 使用端口 80，HTTPS 使用端口 443。如果服务器使用了不同的端口，则需要在 URL 中指定。
   - 例如：`http://www.example.com:8080` 表示通过端口 8080 访问该网站。

5. **路径（Path）**：

   - **格式**：`/路径/文件`
   - 表示 Web 服务器上的资源位置或文件路径。例如：`http://www.example.com/about` 指向网站中的 “about” 页面。路径部分用于确定服务器上的特定文件或目录。

6. **查询字符串（Query String， 可选）**：

   - **格式**：`?参数名=参数值&参数名=参数值`
   - 查询字符串用于在 URL 中传递参数，它以 `?` 开头，后面可以跟一个或多个键值对，用 `&` 分隔。例如：`http://www.example.com/search?q=HTTP` 表示搜索查询参数 `q=HTTP`。
   - 查询字符串常用于 GET 请求中的数据传递。

7. **片段标识符（Fragment Identifier， 可选）**：
   - **格式**：`#片段`
   - 用于指向页面中的某个特定部分，常用于锚点链接。例如：`http://www.example.com/about#team` 指向 “about” 页面中的 “team” 部分。

### **URL 示例**

1. **标准 HTTP URL**：

   ```
   http://www.example.com/about
   ```

   解释：

   - 使用 HTTP 协议
   - 访问 `www.example.com` 网站上的 `about` 页面

2. **带查询参数的 URL**：

   ```
   https://www.example.com/search?q=HTTP&sort=date
   ```

   解释：

   - 使用 HTTPS 协议
   - 查询参数 `q=HTTP` 表示搜索词，`sort=date` 表示按照日期排序

3. **带端口号的 URL**：

   ```
   http://www.example.com:8080/page
   ```

   解释：

   - 使用 HTTP 协议
   - 访问 `www.example.com` 的端口 8080 上的 `/page` 路径

4. **带片段标识符的 URL**：
   ```
   http://www.example.com/about#team
   ```
   解释：
   - 使用 HTTP 协议
   - 访问 `www.example.com/about` 页面，并跳转到页面中的 `team` 部分

### **URL 相关的 HTTP 请求**

在 HTTP 协议中，URL 用于标识请求的资源位置。客户端（如浏览器）通过 URL 发起请求，HTTP 请求中包含了该 URL 及其他相关信息（如请求头、请求方法等），服务器根据 URL 来决定如何处理请求并返回响应。

#### **例如**：

- **GET 请求**：客户端请求指定 URL 的资源，返回网页或数据。
- **POST 请求**：客户端向服务器提交数据，通常用于表单提交或文件上传。

### **总结**

URL 是在互联网上标识资源位置的标准方式，它由协议、主机名、路径、查询参数等部分组成。在 HTTP 协议中，URL 是客户端与服务器进行通信的基础，客户端通过 URL 来定位需要访问的资源或页面。

## 4. HTTP 报文

## 5. HTTP 状态码

## 6. HTTP 方法

## 7. HTTP 头部字段

## 8. HTTP Cookie

## 9. HTTP 缓存

## 10. HTTP 连接管理

## 11. HTTP 安全

## 12. HTTP 压缩

## 13. HTTP 重定向

## 14. HTTP 跨域

## 15. HTTP 代理

## 16. HTTP 负载均衡

## 17. HTTP 长连接

## 18. HTTP 短连接

## 19. HTTP 长轮询

## 20. HTTP 流

## 21. HTTP 流量控制

> TODO

---

相关文章：

- [从用户在浏览器地址栏输入网址，到看到整个页面，中间都发生了哪些事情？](/js/js-theory/What-happened-to-the-browser-after-entering-the-URL)。
- [HTTP 简述](/protocol/30_HTTP-brief-description)。
- [网络协议](/protocol/2_network-protocol)。
