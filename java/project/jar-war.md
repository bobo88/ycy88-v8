# jar 还是 war？

::: tip 提示
选择使用 JAR 还是 WAR 取决于项目的具体需求和部署环境。

WAR 文件代表了一个 WEB 应用程序，把 WAR 文件作为部署单元来使用，而 JAR 是类的归档文件。
:::

## 一、使用 JAR 的场景

### 1. **Spring Boot 应用**

- **自包含**：Spring Boot 应用程序通常打包成可执行 JAR 文件，包含所有依赖项和内嵌的应用服务器（如 Tomcat）。
- **简化部署**：可执行 JAR 文件可以在任何支持 Java 的环境中直接运行，使用 `java -jar yourapp.jar` 命令即可。
- **容器化**：JAR 文件非常适合在 Docker 等容器中运行，简化了容器的构建和部署。

### 2. **微服务架构**

- **独立服务**：每个微服务可以独立打包成一个 JAR 文件，独立部署和运行，彼此间无紧密依赖。
- **快速启动**：Spring Boot 的快速启动特性使得 JAR 文件更适合频繁的启动和停止操作。

### 3. **开发和测试**

- **快速迭代**：JAR 文件的自包含性和快速启动特性，使其非常适合开发和测试阶段频繁的迭代和部署。

### 优点

- **简化的部署和运行**：一个 JAR 文件包含所有内容，易于管理和部署。
- **内嵌服务器**：不需要单独的应用服务器。
- **容器友好**：适合现代容器化部署。

### 缺点

- **资源消耗**：内嵌服务器可能会增加资源消耗。
- **定制化难度**：对于一些特定的服务器配置和优化，内嵌服务器可能不如外部服务器灵活。

## 二、使用 WAR 的场景

### 1. **传统企业应用**

- **应用服务器集成**：许多企业使用成熟的应用服务器（如 Tomcat、JBoss、WebSphere），这些服务器通常部署 WAR 文件。
- **多应用集成**：在一个应用服务器上部署多个应用时，使用 WAR 文件更为方便。

### 2. **大规模应用**

- **负载均衡**：大型应用可以依赖应用服务器的负载均衡和集群管理功能。
- **安全管理**：应用服务器提供的安全特性（如 SSL、认证、授权等）可以集中管理。

### 3. **多团队协作**

- **分离职责**：开发团队负责开发和打包 WAR 文件，运维团队负责在应用服务器上部署和管理这些文件。

### 优点

- **成熟的应用服务器特性**：利用应用服务器提供的各种功能，如连接池、JNDI、集群管理等。
- **集中管理**：适合大型企业集中管理应用和资源。
- **定制化**：应用服务器提供更细粒度的配置和优化选项。

### 缺点

- **复杂的部署流程**：需要额外的应用服务器管理和配置。
- **依赖性**：依赖外部的应用服务器，增加了管理和维护的复杂性。
- **启动时间长**：应用服务器的启动和部署时间较长，不适合频繁迭代的开发环境。

## 三、决策指南

### 使用 JAR 的情况

- **轻量级和快速迭代的微服务架构**。
- **使用 Spring Boot 或类似框架的自包含应用**。
- **需要快速开发、测试和部署周期**。
- **部署在容器化环境中（如 Docker）**。

### 使用 WAR 的情况

- **传统企业级应用**，使用现有的应用服务器。
- **需要利用应用服务器的特性**（如负载均衡、集群管理、安全管理）。
- **多团队协作，职责分离**，开发和运维团队分别负责应用和服务器。
- **复杂的大规模应用**，需要集中管理和优化资源。

通过上述分析，你可以根据项目的具体需求和环境选择合适的打包方式。一般来说，现代微服务和轻量级应用更适合使用 JAR，而传统的大型企业应用更适合使用 WAR。
